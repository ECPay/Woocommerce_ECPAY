(()=>{"use strict";const e=window.React,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"ecpay-invoice-block/invoice-fields","version":"1.0.0","title":"ECPay Woocommerce Invoice Block","category":"woocommerce","parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"ecpay-invoice-block","editorScript":"file:./build/index.js"}'),c=window.wp.components,a=window.wp.i18n,i=window.wp.element,{registerCheckoutBlock:r}=wc.blocksCheckout;r({metadata:o,component:({children:o,checkoutExtensionData:r})=>{const{setExtensionData:l,getExtensionData:n}=r,[t,m]=(0,i.useState)("p"),[v,_]=(0,i.useState)("0"),[p,u]=(0,i.useState)([{label:(0,a.__)("Paper Invoice","ecpay-ecommerce-for-woocommerce"),value:"0"},{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Citizen Digital Certificate","ecpay-ecommerce-for-woocommerce"),value:"2"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}]),[b,s]=(0,i.useState)(""),[y,d]=(0,i.useState)(""),[w,f]=(0,i.useState)(""),[C,k]=(0,i.useState)("");let h="",g="enable";(0,i.useEffect)((()=>{l("ecpay-invoice-block","invoice_type",t),l("ecpay-invoice-block","invoice_carruer_type",v),null!==InvoiceData.DonateCode&&(h=InvoiceData.DonateCode,f(h),l("ecpay-invoice-block","invoice_love_code",h)),null!==InvoiceData.InvoicePapper&&(g=InvoiceData.InvoicePapper,"disable"==g&&u([{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Citizen Digital Certificate","ecpay-ecommerce-for-woocommerce"),value:"2"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}]))}),[]),(0,i.useEffect)((()=>{p.length>0&&(_(p[0].value),l("ecpay-invoice-block","invoice_carruer_type",p[0].value))}),[p]);const I=(e,o)=>{if("invoice_type"===e)if("c"===o){var c=[{label:(0,a.__)("Paper Invoice","ecpay-ecommerce-for-woocommerce"),value:"0"},{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}];"disable"==g&&(c=[{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}]),u(c)}else"p"===o?(c=[{label:(0,a.__)("Paper Invoice","ecpay-ecommerce-for-woocommerce"),value:"0"},{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Citizen Digital Certificate","ecpay-ecommerce-for-woocommerce"),value:"2"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}],"disable"==g&&(c=[{label:(0,a.__)("Cloud Invoice (Paper sent if winning)","ecpay-ecommerce-for-woocommerce"),value:"1"},{label:(0,a.__)("Citizen Digital Certificate","ecpay-ecommerce-for-woocommerce"),value:"2"},{label:(0,a.__)("Mobile Barcode","ecpay-ecommerce-for-woocommerce"),value:"3"}]),u(c),_(c[0].value),l("ecpay-invoice-block","invoice_carruer_type",c[0].value)):u([]);s(""),d(""),f(h),k(""),l("ecpay-invoice-block","invoice_customer_company",h),l("ecpay-invoice-block","invoice_customer_identifier",h),l("ecpay-invoice-block","invoice_love_code",h),l("ecpay-invoice-block","invoice_carruer_num",h)},D=(0,i.useCallback)(((e,o)=>{switch(o){case"invoice_type":m(e),I(o,e);break;case"invoice_carruer_type":_(e),I(o,e);break;case"invoice_customer_company":s(e);break;case"invoice_customer_identifier":d(e);break;case"invoice_love_code":f(e);break;case"invoice_carruer_num":k(e)}l("ecpay-invoice-block",o,e)}),[m,_,s,d,f,k,l]);return(0,e.createElement)("div",{className:"ecpay_invoice_fields"},(0,e.createElement)(c.SelectControl,{label:(0,a.__)("Invoice Type","ecpay-ecommerce-for-woocommerce"),value:t,options:[{label:(0,a.__)("Personal","ecpay-ecommerce-for-woocommerce"),value:"p"},{label:(0,a.__)("Company","ecpay-ecommerce-for-woocommerce"),value:"c"},{label:(0,a.__)("Donation","ecpay-ecommerce-for-woocommerce"),value:"d"}],onChange:e=>D(e,"invoice_type"),required:!0,style:{height:"3rem"}}),"d"!==t&&(0,e.createElement)(c.SelectControl,{label:(0,a.__)("Carrier Type","ecpay-ecommerce-for-woocommerce"),value:v,options:[...p],onChange:e=>D(e,"invoice_carruer_type"),required:!0,style:{height:"3rem"}}),"c"===t&&(0,e.createElement)(c.TextControl,{label:(0,a.__)("Company Name","ecpay-ecommerce-for-woocommerce"),value:b,onChange:e=>D(e,"invoice_customer_company"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"c"===t&&(0,e.createElement)(c.TextControl,{label:(0,a.__)("Uniform Numbers","ecpay-ecommerce-for-woocommerce"),value:y,onChange:e=>D(e,"invoice_customer_identifier"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),"d"===t&&(0,e.createElement)(c.TextControl,{label:(0,a.__)("Donation Code","ecpay-ecommerce-for-woocommerce"),value:w,onChange:e=>D(e,"invoice_love_code"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}),("2"===v||"3"===v)&&(0,e.createElement)(c.TextControl,{label:(0,a.__)("Carrier Number","ecpay-ecommerce-for-woocommerce"),value:C,onChange:e=>D(e,"invoice_carruer_num"),required:!0,style:{height:"3rem",width:"-webkit-fill-available",padding:"7px"}}))}})})();